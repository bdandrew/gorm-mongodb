<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>mongodb-morphia 0.7.2 - Reference Documentation</title>
        <link rel="stylesheet" href="../../css/ref.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    <h1>update</h1><p class="paragraph"/><h2>Purpose</h2><p class="paragraph"/>Updates fields of instances<p class="paragraph"/>Be aware that after calling update the domain class instance is not refreshed automatically. You need to fetch the entity from db again to get the new state.<p class="paragraph"/><h2>Examples</h2><p class="paragraph"/><div class="code"><pre>// increase field value of actualHours by 5
task.update &#123;
  inc 'actualHours', 5
&#125;<p class="paragraph"/>// increase field value of actualHours by 5, create entity <span class="java&#45;keyword">if</span> not in db
Task.update(params.id, &#123;
  inc 'actualHours', 5
&#125;, <span class="java&#45;keyword">true</span>)<p class="paragraph"/>// update set
document.update &#123;
  add 'tags', 'mongodb' // add string 'mongodb' to the 'tags' set
&#125;</pre></div><p class="paragraph"/><h2>Description</h2><p class="paragraph"/>On instances:<p class="paragraph"/><div class="code"><pre>book.update( Closure updateOperations )
book.update( Closure updateOperations, <span class="java&#45;object">boolean</span> createIfAbsent )
book.update( Closure updateOperations, <span class="java&#45;object">boolean</span> createIfAbsent, WriteConcern wc )</pre></div><p class="paragraph"/>As class method:<p class="paragraph"/><div class="code"><pre>book.update( id, Closure updateOperations )
book.update( id, Closure updateOperations, <span class="java&#45;object">boolean</span> createIfAbsent )
book.update( id, Closure updateOperations, <span class="java&#45;object">boolean</span> createIfAbsent, WriteConcern wc )<p class="paragraph"/>book.update( Map query, Closure updateOperations )
book.update( Map query, Closure updateOperations, <span class="java&#45;object">boolean</span> createIfAbsent )
book.update( Map query, Closure updateOperations, <span class="java&#45;object">boolean</span> createIfAbsent, WriteConcern wc )</pre></div><p class="paragraph"/>
Parameters:
<ul class="star">
<li><code>id</code> - id of the entity</li>
<li><code>query</code> - query as used in findAll method</li>
<li><code>updateOperations</code> - This closure is executed within the context of morphias <a href="http://code.google.com/p/morphia/source/browse/trunk/morphia/src/main/java/com/google/code/morphia/query/UpdateOperations.java" target="blank">UpdateOperations</a></li>
<li><code>createIfAbsent</code> - If set to true, flieds that are not present in entity will be created</li>
<li><code>wc</code> - A WriteConcern object which configures the write strategy for the update operation</li>
</ul><p class="paragraph"/><h2>See also</h2>
<ul class="star">
<li><a href="http://code.google.com/p/morphia/wiki/Updating" target="blank">Morphia - How to update data</a></li>
<li><a href="http://api.mongodb.org/java/current/com/mongodb/WriteConcern.html" target="blank">WriteConcern api docs</a></li>
</ul><p class="paragraph"/>.
    </body>
</html>
